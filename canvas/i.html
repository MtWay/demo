<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>canvas</title>
		<style type="text/css">
			canvas{border: 1px solid #f00;}
		</style>
		<script src="js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){
				function onload() {
    var canvas = document.getElementById('can');
    var ctx1 = canvas.getContext('2d');
    var image1 = new Image();
    image1.onload = function() {
      // regular rotation about center
      var xpos = canvas.width/2;
      var ypos = canvas.height/2;
//    ctx1.drawImage(image1, xpos - image1.width / 2, ypos - image1.height / 2);
//    ctx1.translate(xpos, ypos);
//    ctx1.rotate(90 * Math.PI / 180);//旋转47度
//    ctx1.translate(-xpos, -ypos);
      ctx1.drawImage(image1,100,100,500,500,0,0,200,200);
    }
    
//  context.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);
//  img	规定要使用的图像、画布或视频。
//sx	可选。开始剪切的 x 坐标位置。
//sy	可选。开始剪切的 y 坐标位置。
//swidth	可选。被剪切图像的宽度。
//sheight	可选。被剪切图像的高度。
//x	在画布上放置图像的 x 坐标位置。
//y	在画布上放置图像的 y 坐标位置。
//width	可选。要使用的图像的宽度。（伸展或缩小图像）
//height	可选。要使用的图像的高度。（伸展或缩小图像）
    
    image1.src = 'img/e3e08a1ebc0020309c7f9b24e59c423e.jpg';
  }
				onload();
				$("#can").click(function(){
//					this.toBlob && this.toBlob(function(blob) {
//          var newImg = document.createElement("img"),
//              url = URL.createObjectURL(blob);
//              
//          newImg.onload = function() {
//              // 移除
//              URL.revokeObjectURL(url);
//          };
//          newImg.src = url;
//          $(".demo").append(newImg);
//				})
	var img = new Image();
//var mycanvas = document.getElementById("can");  
   img.src = $("#can")[0].toDataURL("image/png");  
    //封装blob对象  
    //var blob = dataURItoBlob(base64Data);
    $('.demo').append(img)
			})
				})
		</script>
	</head>
	<body>
		<canvas id="can" width="1100" height="800"></canvas>
		<div class="demo">
			
		</div>
	</body>
</html>
